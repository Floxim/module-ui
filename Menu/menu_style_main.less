/*
{
    "name":"Главное меню",
    "vars": {
        "color_link": {"label":"Цвет пункта","type":"palette"},
        "color_link_active": {"label":"Цвет активного","type":"palette"},
        "text_transform": {"type":"string"}
    }
}
*/

/*
name: Главное меню
vars:
  color_link:
    label: Цвет пункта
    type: palette
  color_link_active:
    label: Цвет активного
    type: palette
  text_transform:
    type:string
*/
.menu_style_main(
    @color_link: main 1; 
    @color_link_active: alt 2;
    @text_transform:uppercase;
) {
    
    //@border_color:rgba(215,215,215,0.5);
    
    #__link {
        display: block;
        padding:15px @layout_padding_horizontal;
        font-size:17px;
        font-weight:500;
        text-transform: @text_transform;
        font-family:@font_nav;
        #_active, &:hover {
            .tcolor(@color_link_active);
        }
    }
    
    #__item_level_1 {
        #__link {
            .tcolor(@color_link);
        }
        #_active > #__link, & > #__link:hover {
            .tcolor(@color_link_active);
        }
        #_has-children #__link:after {
            border-top: 5px solid;
            .tcolor(@color_link, border-top-color);
        }
    }
    
    #_layout_horizontal {
        display:flex;
        .layout__section_header & {
            flex-grow:1;
        }
        #__level_level_1 {
            display:flex;
        }
        #__item_level_1 {
            display:flex;
            & > #__link_active > #__link-name { 
                position:relative;
                &:after {
                    content: '';
                    position: absolute;
                    bottom:-5px;
                    left: 0;
                    width:100%;
                    border-top: 2px solid;
                    .tcolor(@color_link, border-top-color);
                    z-index: 10;
                }
            }
            & > #__link {
                display:flex;
                font-weight:bold;
                font-size:19px;
                #__link-name {
                    margin:auto;
                }
            }
        }
        
        #__level_level_2 {
            top:100%;
            left:0;
            box-shadow:1px 1px 10px rgba(0,0,0,0.3);
            #__item {
                border-bottom:1px solid #d7d7d7;
            }
        }
        #__item_has-children {
            & > #__link {
                &:after {
                    content:'';
                    display:block;
                    margin: auto 0 auto 15px;
                    border-left: 5px solid transparent;
                    border-right: 5px solid transparent;
                }
            }
            #_active > #__link:after, & > #__link:hover:after {
                border-top: 5px solid;
                .tcolor(@color_link_active, border-top-color);
            }
        }
        #__item_expanded #__level {
            display:block;
            min-width:100%;
            background:#FFF;
            z-index:1000;
        }
        #__item_level_2 {
            #__link {
                //border-right:1px solid @border_color;
                text-transform:none;
                white-space:nowrap;
                font-family:@font_text;
                .color(main);
                &_active, &:hover {
                    .color(@color_link_active);
                }
            }
            &:last-child, #__item:last-child {
                //border-bottom:1px solid @border_color;
            }
            &:first-child {
                //border-top:1px solid @border_color;
            }
        }
    }
}

.menu_style_main {
    .menu_style_main();
}